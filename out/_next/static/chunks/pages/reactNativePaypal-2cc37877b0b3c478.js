(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2010],{51705:function(e,r,t){"use strict";var n=t(22760);r.Z=n.Z},25091:function(e,r,t){"use strict";function n(e,r){"function"===typeof e?e(r):e&&(e.current=r)}t.d(r,{Z:function(){return n}})},22760:function(e,r,t){"use strict";t.d(r,{Z:function(){return u}});var n=t(67294),a=t(25091);function u(...e){return n.useMemo((()=>e.every((e=>null==e))?null:r=>{e.forEach((e=>{(0,a.Z)(e,r)}))}),e)}},73588:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reactNativePaypal",function(){return t(51936)}])},6995:function(e,r,t){"use strict";t.d(r,{M:function(){return f}});var n=t(26042),a=t(96486),u=t(39738),o=t(49058),i=t(17876),s=(t(29020),t(45543)),c=t(80487),d=t(47568),l=t(70655),p=function(){var e=(0,d.Z)((function(e,r,t,n){var a,u;return(0,l.__generator)(this,(function(o){return a={key:e,order_id:r,handler:function(){t.push({pathname:c.Kh,query:{orderId:n}})}},(u=new window.Razorpay(a)).on("payment.failed",(function(){t.push({pathname:c.Pw,query:{orderId:n}})})),u.open(),[2]}))}));return function(r,t,n,a){return e.apply(this,arguments)}}(),f=function(e,r,t,d,l,f,h,y,v){return new Promise((function(e,g){if("authenticated"===(null===r||void 0===r?void 0:r.status)){t(!0);var m=(0,a.get)(d,"billing.paymentMethod"),b=(0,n.Z)({},d);(null===f||void 0===f?void 0:f.couponApplied)&&(b.couponCode=(0,a.get)(f,"appliedCouponCode")),l((0,u.u1)(d)),(0,i.QF)(o.UO,b,l).then((function(r){t(!1);var n=(0,a.get)(r,"data.addOrder"),u=n.success,o=n.message,i=n.redirectUrl,d=n.id,l=n.paypalOrderId,f=n.razorpayOrderId;switch(m){case c._z:u&&i&&y.push(i);break;case c.YR:u&&l?e({paypalOrderId:l,orderId:d}):g(new Error("Paypal order ID not found"));break;case c.fD:if(u&&d){h(""),y.push({pathname:c.Kh,query:{orderId:d}})}break;case c.VH:u&&f&&p(v,f,y,d);break;case c.rS:if(u&&d){h(""),y.push({pathname:c.Kh,query:{orderId:d}})}break;default:u||(0,s.Z)(o,!1)}})).catch((function(e){t(!1),(0,i.S3)(e,l,y)}))}}))}},52586:function(e,r,t){"use strict";var n=t(85893),a=(t(67294),t(24358)),u=t(98456);r.Z=function(){return(0,n.jsx)(a.Z,{className:"backdrop",open:!0,children:(0,n.jsx)("div",{className:"backdropInnerWrapper",children:(0,n.jsx)(u.Z,{color:"inherit"})})})}},51936:function(e,r,t){"use strict";t.r(r);var n=t(47568),a=t(70655),u=t(85893),o=t(67294),i=t(45697),s=t.n(i),c=t(11163),d=t(25617),l=t(10682),p=t(96486),f=t(52586),h=(t(6995),t(80487)),y=t(51164),v=(t(58144),t(49058)),g=t(17150),m=t(17876),b={layout:"vertical",color:"blue",shape:"rect",label:"paypal"},_=0,w=function(){var e=(0,o.useRef)(),r=(0,c.useRouter)(),t=(0,o.useState)(null),i=t[0],s=t[1],w=(0,o.useState)(null),P=w[0],Z=w[1],E=(0,o.useState)(""),k=E[0],I=E[1],O=(0,d.I0)(),q=(0,o.useState)(!1),N=q[0],j=q[1],x=(0,o.useState)(!1),R=x[0],S=x[1],D=(0,d.v9)((function(e){return e.setting}));(0,o.useEffect)((function(){var e=(0,p.get)(r,"query.orderData",null),t={};if(e)try{t=JSON.parse(e)}catch(n){console.error("Failed to parse orderDetail:",n)}s(t.token),I(t)}),[r]),(0,o.useEffect)((function(){O((0,y.Gw)())}),[O]),(0,o.useEffect)((function(){var e="";e=(0,p.get)(D,"setting.payment.paypal.test_mode")?(0,p.get)(D,"setting.payment.paypal.sandbox_client_id"):(0,p.get)(D,"setting.payment.paypal.live_client_id"),S(e)}),[D]);var C=function(){var e=(0,n.Z)((function(e,r,t){var n,u,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:n=t,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,g.Z.mutate({mutation:e,variables:r,context:{headers:{Authorization:n}}})];case 2:return u=a.sent(),[2,Promise.resolve(u)];case 3:return o=a.sent(),[2,(0,m.S3)(o)];case 4:return[2]}}))}));return function(r,t,n){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){j(!0);var t="",u=(0,p.get)(D,"setting.payment.paypal");u&&R?(Z(""),setTimeout((function(){0===_&&(!function(){if(!window.paypal||!window.paypal.Buttons)return Z("Unable to load PayPal."),void j(!1);window.paypal.Buttons({style:b,createOrder:function(){var e=(0,n.Z)((function(e,r,n){var u,o,s;return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,C(v.UO,k,i)];case 1:return u=e.sent(),o=(0,p.get)(u,"data.addOrder.paypalOrderId"),t=(0,p.get)(u,"data.addOrder.id"),[2,o];case 2:throw s=e.sent(),console.error("Failed to create order:",s),j(!1),s;case 3:return[2]}}))}));return function(r,t,n){return e.apply(this,arguments)}}(),onApprove:function(){var e=(0,n.Z)((function(e,n){var u;return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,n.order.capture()];case 1:return"COMPLETED"===e.sent().status&&r.push({pathname:h.Kh,query:{orderId:t}}),[3,3];case 2:return u=e.sent(),console.error("Failed to capture order:",u),j(!1),[3,3];case 3:return[2]}}))}));return function(r,t){return e.apply(this,arguments)}}(),onError:function(e){console.error("PayPal button error:",e),Z("Error processing PayPal payment."),j(!1)}}).render(e.current).then((function(){return j(!1)})).catch((function(e){console.error("PayPal button render error:",e),Z("Error rendering PayPal button."),j(!1)}))}(),_++)}),3e3)):(Z("Unable to load paypal button."),j(!1))}),[D,R,k,i,r]),(0,u.jsxs)(l.Z,{className:"empty-checkout-page",children:[P&&!N&&(0,u.jsx)("div",{className:"error-message paypal-error-message",children:P}),N&&(0,u.jsx)(f.Z,{}),(0,u.jsx)("div",{className:"checkout-unauthorised-container",children:(0,u.jsx)("div",{ref:e})})]})};w.propTypes={customerId:s().string.isRequired,session:s().object.isRequired,setLoading:s().func.isRequired,billingDetails:s().object.isRequired,couponCartDetail:s().object.isRequired,setBillingDetails:s().func.isRequired},r.default=w}},function(e){e.O(0,[8674,8662,6e3,9774,2888,179],(function(){return r=73588,e(e.s=r);var r}));var r=e.O();_N_E=r}]);